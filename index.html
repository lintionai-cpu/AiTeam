<!doctype html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Deriv Options Auto Trader</title>
    <link rel="stylesheet" href="./src/styles.css" />
  </head>
  <body>
    <header class="topbar">
      <h1>Deriv Options Auto Trader</h1>
      <div class="status-pill" id="connection-status">Disconnected</div>
    </header>

    <main class="grid">
      <section class="card">
        <h2>Connection & Account</h2>
        <div class="row">
          <label>App ID <input id="app-id" type="number" value="1089" /></label>
          <label>API Token <input id="api-token" type="password" placeholder="Deriv API token" /></label>
        </div>
        <div class="row">
          <button id="connect-btn">Connect</button>
          <button id="disconnect-btn">Disconnect</button>
          <button id="reset-btn" class="warn">Reset Trading State</button>
        </div>
        <div id="account-overview" class="kv"></div>
      </section>

      <section class="card">
        <h2>Execution Controls</h2>
        <div class="grid-2">
          <label>Stake <input id="stake" type="number" value="1" step="0.01" /></label>
          <label>Run Count <input id="run-count" type="number" value="100" /></label>
          <label>Max Win <input id="max-win" type="number" value="20" /></label>
          <label>Min Win <input id="min-win" type="number" value="1" /></label>
          <label>Max Loss <input id="max-loss" type="number" value="10" /></label>
          <label>Duration <input id="duration" type="number" value="1" /></label>
          <label>Duration Unit
            <select id="duration-unit">
              <option value="t">Ticks</option>
              <option value="s">Seconds</option>
              <option value="m" selected>Minutes</option>
            </select>
          </label>
          <label>Focus Timeframe
            <select id="focus-timeframe">
              <option value="1m">1m</option>
              <option value="3m" selected>3m</option>
              <option value="5m">5m</option>
            </select>
          </label>
        </div>
      </section>

      <section class="card">
        <h2>Market Focus</h2>
        <label>Focus Market
          <select id="focus-market"></select>
        </label>
        <p class="muted">All markets are still analyzed in parallel. Only the selected focus market can be traded.</p>
      </section>

      <section class="card">
        <h2>Risk Manager</h2>
        <label><input id="risk-enabled" type="checkbox" checked /> Enabled</label>
        <div class="grid-2">
          <label>Max Drawdown % <input id="max-drawdown" type="number" value="10" /></label>
          <label>Max Consecutive Losses <input id="max-consec-loss" type="number" value="4" /></label>
          <label>Equity Floor <input id="equity-floor" type="number" value="0" /></label>
        </div>
      </section>

      <section class="card">
        <h2>Smart Martingale</h2>
        <label><input id="martingale-enabled" type="checkbox" /> Enabled</label>
        <div class="grid-2">
          <label>Multiplier <input id="martingale-multiplier" type="number" step="0.1" value="2" /></label>
          <label>Max Steps <input id="martingale-steps" type="number" value="3" /></label>
        </div>
      </section>

      <section class="card wide">
        <h2>Strategies</h2>
        <div id="strategy-toggles" class="strategy-grid"></div>
      </section>

      <section class="card wide">
        <h2>Signal Log</h2>
        <div id="signal-log" class="log"></div>
      </section>

      <section class="card wide">
        <h2>Active Trades</h2>
        <div id="active-trades" class="log"></div>
      </section>

      <section class="card wide">
        <h2>Trade History</h2>
        <div id="trade-history" class="log"></div>
      </section>
    </main>

    <script type="module" src="./src/main.js"></script>
  </body>
</html>
